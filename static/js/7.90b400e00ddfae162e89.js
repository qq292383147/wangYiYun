webpackJsonp([7],{"4FER":function(t,e,n){"use strict";var i={name:"loginBtn",props:{title:{type:String,default:"下一步"}}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn"},[e("button",{attrs:{id:"btn"}}),this._v(" "),e("label",{ref:"btnText",staticClass:"label",attrs:{for:"btn"}},[this._v(this._s(this.title))])])},staticRenderFns:[]};var s=n("VU/8")(i,a,!1,function(t){n("Dl18")},"data-v-3f871144",null);e.a=s.exports},DVUB:function(t,e){},Dl18:function(t,e){},Fhvg:function(t,e,n){"use strict";var i={name:"alert",props:{alert:{type:String},isAlert:{type:Boolean}}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:this.isAlert,expression:"isAlert"}],staticClass:"alert"},[this._v(this._s(this.alert))])])],1)},staticRenderFns:[]};var s=n("VU/8")(i,a,!1,function(t){n("bKiY")},"data-v-62cb98fa",null);e.a=s.exports},M8gZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("yG2O"),a=n("4FER"),s=n("Fhvg"),r={name:"alert",props:{isLoading:{type:Boolean}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:this.isLoading,expression:"isLoading"}],staticClass:"loading"},[e("p")])])],1)},staticRenderFns:[]};var l=n("VU/8")(r,o,!1,function(t){n("DVUB")},"data-v-b077a184",null).exports,c=n("gyMJ"),u={name:"phonePwd",data:function(){return{pwd:"",alert:!1,alertText:"用户名或密码错误",title:"登录",loading:!1,flag:!0}},components:{loginBtn:a.a,alert:s.a,loading:l},methods:{clearInput:function(){this.pwd=""},alertEvent:function(){var t=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.alert=!0,this.timer=setTimeout(function(){t.alert=!1},1e3)},_getLoginState:function(){var t=this;c.a.loginStatusFn().then(function(e){var n=e.data.profile.userId;if(200===e.data.code){var i=e.data.profile;t.$store.commit("LOGIN_STATE"),localStorage.setItem("loginState",1),localStorage.setItem("avatarUrl",i.avatarUrl),localStorage.setItem("nickname",i.nickname),t.$store.commit("ACCOUNT_UID",n),localStorage.setItem("accountUid",n)}}).catch(function(t){console.log(t)})},passwordIsCorrect:function(t){t||(this.alertText="请输入密码",this.alertEvent());var e=Object(i.a)();this._isSure(e,t)},_isSure:function(t,e){var n=this;c.a.phoneLoginFn(t,e).then(function(e){localStorage.setItem("account",t),n.success()}).catch(function(t){t&&n.error()})},success:function(){this.$store.commit("LOGIN_STATE"),localStorage.setItem("loginState",1),this.LoadingEnd(),this._getLoginState(),this.$router.push({path:"/find"}),location.reload()},error:function(){this.alertText="用户名或密码错误",this.alertEvent(),this.clearInput(),this.LoadingEnd(),this.flag=!0},logon:function(){this.flag&&(this.flag=!1,this.Loading(),this.passwordIsCorrect(this.pwd))},LoadingEnd:function(){this.title="登录",this.loading=!1},Loading:function(){this.title="登录中...",this.loading=!0},changFocus:function(){var t=this;this.$nextTick(function(e){t.$refs.inputs.focus()})}},created:function(){this.changFocus()}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"inp border-bottom"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],ref:"inputs",attrs:{type:"password",placeholder:"请输入密码",autofocus:"autofocus"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}}),t._v(" "),n("router-link",{attrs:{to:"/forget"}},[t._v("忘记密码")])],1),t._v(" "),n("login-btn",{attrs:{title:t.title},nativeOn:{click:function(e){return t.logon(e)}}}),t._v(" "),n("alert",{attrs:{"is-alert":t.alert,alert:t.alertText}}),t._v(" "),n("loading",{attrs:{"is-loading":t.loading}})],1)},staticRenderFns:[]};var h=n("VU/8")(u,d,!1,function(t){n("fFVj")},"data-v-95db33a0",null);e.default=h.exports},bKiY:function(t,e){},fFVj:function(t,e){},yG2O:function(t,e,n){"use strict";e.a=function(){return new RegExp(/\d*$/).exec(window.location.hash)[0]}}});
//# sourceMappingURL=7.90b400e00ddfae162e89.js.map