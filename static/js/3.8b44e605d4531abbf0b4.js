webpackJsonp([3],{"4xu8":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),n=s.n(i),r=s("woVd"),a=s("NYxO"),o=s("f0X5"),c=s("94d3"),d={name:"",mounted:function(){this.setLinkPage(),this.getKey()},computed:n()({},Object(a.c)({page:"LINK_PAGE"})),methods:{setLinkPage:function(){var t=this.$route.params.id;this.linkPage=t},getKey:function(){var t=this;o.a.$on("push",function(e){t.linkPage=e})},handleScroll:function(t){this.$refs.navs.scrollLeft=85*t},getPage:function(t){var e=this.toLink.indexOf(t);this.handleScroll(e)}},watch:{linkPage:function(t){this.list=[{path:"/composite/"+t,text:"综合"},{path:"/song/"+t,text:"单曲"},{path:"/video/"+t,text:"视频"},{path:"/artist/"+t,text:"歌手"},{path:"/album/"+t,text:"专辑"},{path:"/playList/"+t,text:"歌单"},{path:"/djRadio/"+t,text:"主播电台"},{path:"/user/"+t,text:"用户"}]},page:function(t){this.getPage(t)}},data:function(){return{linkPage:"",list:[],toLink:["composite","song","video","artist","album","playList","djRadio","user"]}},components:{sliderNav:c.a}},u={render:function(){var t=this.$createElement;return(this._self._c||t)("slider-nav",{attrs:{list:this.list}})},staticRenderFns:[]};var l=s("VU/8")(d,u,!1,function(t){s("XJL5")},"data-v-075749af",null).exports,h={name:"searchResults",components:{searchInput:r.a,navList:l},data:function(){return{key:""}},watch:{$route:function(t,e){this.key=t.params.id}},computed:n()({},Object(a.c)({load:"LOAD"})),created:function(){this.setKey()},methods:{setKey:function(){this.key=this.$route.params.id}}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("search-input",{attrs:{keyword:this.key}}),this._v(" "),e("nav-list"),this._v(" "),e("router-view",{staticStyle:{height:"87vh","overflow-y":"scroll"},attrs:{keywords:this.key}})],1)},staticRenderFns:[]};var p=s("VU/8")(h,f,!1,function(t){s("5uvu")},"data-v-2c08ebec",null);e.default=p.exports},"57/J":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("ISPS"),n=s("dd/g"),r=s("mdS2"),a={name:"",props:{firstList:{type:Array},secondList:{type:Array},firstId:{type:String},secondId:{type:String}},computed:{_firstId:{get:function(){return this.firstId},set:function(t){this.$emit("update_firstID",t)}},_secondId:{get:function(){return this.secondId},set:function(t){this.$emit("update_secondID",t)}}},methods:{selectFirst:function(t){this._firstId=t},selectSecond:function(t){this._secondId=t}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"list-wrap"},t._l(t.firstList,function(e){return s("li",{key:e.id,staticClass:"list-item",class:{active:e.id===t._firstId},on:{click:function(s){return t.selectFirst(e.id)}}},[t._v(t._s(e.text))])}),0),t._v(" "),s("ul",{staticClass:"list-wrap"},t._l(t.secondList,function(e){return s("li",{key:e.id,staticClass:"list-item",class:{active:e.id===t._secondId},on:{click:function(s){return t.selectSecond(e.id)}}},[t._v(t._s(e.text))])}),0)])},staticRenderFns:[]};var c=s("VU/8")(a,o,!1,function(t){s("SQvK")},"data-v-738f92fa",null).exports,d=s("gyMJ"),u={name:"",data:function(){return{loading:!0,allArtistList:[],firstId:"10",secondId:"01",firstList:[{text:"华语",id:"10"},{text:"欧美",id:"20"},{text:"日本",id:"60"},{text:"韩国",id:"70"},{text:"其他",id:"40"}],secondList:[{text:"男",id:"01"},{text:"女",id:"02"},{text:"乐队/组合",id:"03"}]}},created:function(){this._getSingerInfo(this.firstId,this.secondId)},mounted:function(){window.addEventListener("scroll",this.handleScroll,!0)},methods:{_getSingerInfo:function(t,e,s,i,n){var r=this,a=t+""+e;d.a.singerClassFn(a,s,i,n).then(function(t){var e=t.data;200===e.code&&(r.allArtistList=e.artists,r.loading=!1)})},updateFirst:function(t){this.firstId=t,this.changeId()},updateSecond:function(t){this.secondId=t,this.changeId()},changeId:function(){this.loading=!0,this._getSingerInfo(this.firstId,this.secondId)},returnPage:function(){this.$router.go(-1)}},components:{selectList:c,generalNav:i.a,artist:n.a,pageLoading:r.a}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"fixed"},[s("general-nav",{staticClass:"pd23",on:{returnPage:t.returnPage}},[s("span",{staticClass:"text"},[t._v("歌手分类")])]),t._v(" "),s("select-list",{staticClass:"pd23",attrs:{firstList:t.firstList,secondList:t.secondList,firstId:t.firstId,secondId:t.secondId},on:{"update:firstId":function(e){t.firstId=e},"update:first-id":function(e){t.firstId=e},"update:secondId":function(e){t.secondId=e},"update:second-id":function(e){t.secondId=e},update_firstID:t.updateFirst,update_secondID:t.updateSecond}})],1),t._v(" "),s("h1",{ref:"title",staticClass:"title pd23"},[t._v("热门歌手")]),t._v(" "),s("page-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),t._l(t.allArtistList,function(e,i){return s("artist",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],key:i,staticClass:"pd23",attrs:{circle:!0,ImgUrl:e.img1v1Url,name:e.name,isIn:e.accountId}})})],2)},staticRenderFns:[]};var h=s("VU/8")(u,l,!1,function(t){s("FQTB")},"data-v-985b36f0",null);e.default=h.exports},"5uvu":function(t,e){},"94d3":function(t,e,s){"use strict";var i={name:"",props:{list:{type:Array},minWidth:{type:String,default:"1.2rem"}},filters:{empty:function(t){return t?" "+t:""}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"navs",staticClass:"wrapper pd23"},t._l(t.list,function(e,i){return s("router-link",{key:i,staticClass:"nav-list",style:{minWidth:t.minWidth},attrs:{to:e.path,replace:""}},[t._v(t._s(e.text)+t._s(t._f("empty")(e.num)))])}),1)},staticRenderFns:[]};var r=s("VU/8")(i,n,!1,function(t){s("jJzM")},"data-v-4884319e",null);e.a=r.exports},FQTB:function(t,e){},SQvK:function(t,e){},XJL5:function(t,e){},f0X5:function(t,e,s){"use strict";var i=s("7+uW");e.a=new i.default},iLLd:function(t,e){},jJzM:function(t,e){},woVd:function(t,e,s){"use strict";var i=s("gyMJ"),n=s("f0X5"),r={name:"searchInp",props:{page:{type:String},Right:{default:"0.23rem"},keyword:{type:String,default:""}},data:function(){return{searchList:[],keywords:"",showList:!1,history:[],time:null,placeholder:""}},created:function(){this.changFocus(),this._getPlaceholder(),this.historySearch(),this.setKeyword()},mounted:function(){this.getHistory()},watch:{keywords:function(t,e){this.keywords!==this.keyword&&this.keywords.length>0?this.displayList():this.hideList()},keyword:function(t,e){t&&(this.keywords=t)}},methods:{setKeyword:function(){this.keyword&&(this.keywords=this.keyword)},goSingerPage:function(){this.$router.push("/singer")},historySearch:function(){var t=this;n.a.$on("search",function(e){t.searchKey(e)})},clearInp:function(){this.keywords=""},changFocus:function(){var t=this;this.keyword||this.$nextTick(function(e){t.$refs.inp.focus()})},returnPage:function(){this.$router.go(-1)},_getPlaceholder:function(){var t=this;i.a.defaultSearchFn().then(function(e){var s=e.data;200===s.code&&(t.placeholder=s.data.showKeyword)})},hideList:function(){this.showList=!1},displayList:function(){this.keywords&&(this.showList=!0,this.setSearchList(this.keywords))},_getSuggestList:function(t){var e=this;i.a.suggestSearchFn(t).then(function(t){var s=t.data;200===s.code&&(e.searchList=s.result.allMatch)})},setSearchList:function(t){var e=this;this.time&&(clearTimeout(this.time),this.time=null),this.time=setTimeout(function(){e._getSuggestList(t)},50)},getHistory:function(t){var e=localStorage.getItem("keys")?localStorage.getItem("keys").split(","):[];t&&(e.unshift(t),e=this.unique(e),localStorage.setItem("keys",e)),this.history=e,n.a.$emit("history",this.history)},pushKey:function(t){this.$nextTick(function(){n.a.$emit("push",t)})},searchKey:function(t){var e=this;this.getHistory(t),this.hideList(),this.clearInp(),setTimeout(function(){e.pushKey(t)},0),this.$router.push({path:"/composite/"+t})},unique:function(t){if(Array.isArray(t))return Array.prototype.filter.call(t,function(e,s){return t.indexOf(e)===s});console.log("type error!")},beforeDestroy:function(){this.$Bus.$off("push","history")}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper pd23"},[s("i",{staticClass:"iconfont zuojiantou",on:{click:t.returnPage}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keywords,expression:"keywords",modifiers:{trim:!0}}],ref:"inp",staticClass:"search",attrs:{type:"text",placeholder:t.placeholder,autofocus:"autofocus"},domProps:{value:t.keywords},on:{focus:t.displayList,input:function(e){e.target.composing||(t.keywords=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.keywords,expression:"keywords"}],staticClass:"iconfont guanbi",style:{right:t.Right},on:{click:t.clearInp}}),t._v(" "),t.page?s("i",{staticClass:"iconfont geshou",on:{click:t.goSingerPage}}):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticClass:"floatInfo"},[s("ul",[s("li",{staticClass:"blue border-bottom",on:{click:function(e){return t.searchKey(t.keywords)}}},[t._v("\n        搜索\n        "),s("span",{staticClass:"text"},[t._v('"'+t._s(t.keywords)+'"')])]),t._v(" "),t._l(t.searchList,function(e,i){return s("li",{key:i,staticClass:"border-bottom",on:{click:function(s){return t.searchKey(e.keyword)}}},[s("i",{staticClass:"iconfont sousuo"}),t._v("\n        "+t._s(e.keyword)+"\n      ")])})],2)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticClass:"mask",on:{click:t.hideList}})])},staticRenderFns:[]};var o=s("VU/8")(r,a,!1,function(t){s("iLLd")},"data-v-4a962288",null);e.a=o.exports}});
//# sourceMappingURL=3.8b44e605d4531abbf0b4.js.map